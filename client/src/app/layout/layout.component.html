<div class="wrapper flex min-h-screen bg-[#292b30]">
  <!-- <div class="w-full h-full fixed z-50 justify-center flex items-center">
    <h1>Hell world!</h1>
  </div> -->

  <app-modal *ngIf="isModalOpen" [title]="'Remember !'" [width]="'2xl'" (onClose)="closeModal()">
    <div class="relative w-full h-[500px] bg-cover bg-center rounded-lg overflow-hidden"
      style="background-image: url({{quote.background}});">
      <img src="https://yara-web.s3.ap-southeast-2.amazonaws.com/assets/yarawhite.png"
        class="absolute top-4 right-4 w-[10%] max-w-[80px] md:w-[15%] lg:w-[10%]" alt="Logo" />

      <div class="absolute inset-0 flex flex-col justify-center items-center text-center text-white px-4">
        <h1 class="text-2xl md:text-4xl font-bold leading-snug drop-shadow-lg">
          "{{quote.quote}}"
        </h1>
        <p class="mt-4 text-lg italic drop-shadow-lg">- {{quote.author}}</p>
        <p class="mt-2 text-sm italic drop-shadow-lg">a friendly reminder from Yara</p>
      </div>
    </div>
  </app-modal>


  <div [ngClass]="{
    'w-20': !isSidebarExpanded,
    'w-52': isSidebarExpanded,
    'moving-gradient': true
  }"
    class="sidebar fixed top-0 left-0 h-full text-white py-5 flex flex-col items-center transition-all duration-300 ease-in-out shadow-lg">
    <div class="w-full h-10 flex items-center justify-center cursor-pointer mb-3" routerLink="/dashboard">
      <div class="w-10 h-10">
        <img src="https://yara-web.s3.ap-southeast-2.amazonaws.com/assets/yarawhite.png" alt="logo">
      </div>
    </div>
    <div class="flex justify-between items-center flex-col h-full mt-5">
      <ul class="space-y-3 w-full">
        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" routerLink="/dashboard">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6 text-gray-300">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
          </svg>
          <span class="ml-2 text-sm" *ngIf="isSidebarExpanded">Dashboard</span>
        </li>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" routerLink="/tools">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6 text-gray-300">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z" />
          </svg>
          <span class="ml-2 text-sm" *ngIf="isSidebarExpanded">Tools</span>
        </li>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" routerLink="/parsers">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z" />
          </svg>
          <span class="ml-2 text-sm" *ngIf="isSidebarExpanded">Parsers</span>
        </li>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" routerLink="/downloads">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6 text-gray-300">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0-3.75-3.75M17.25 21 21 17.25" />
          </svg>
          <span class="ml-2 text-sm" *ngIf="isSidebarExpanded">Downloads</span>
        </li>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" routerLink="/profile">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
          </svg>
          <span class="ml-2 text-sm" *ngIf="isSidebarExpanded">Profile</span>
        </li>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" *ngIf="user.accesslevel === 2"
          routerLink="/users-management">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
          </svg>
          <span class="ml-2 text-sm" *ngIf="isSidebarExpanded">Users Management</span>
        </li>

        <div class="w-full border-t border-gray-500"></div>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center hover:cursor-not-allowed">
          <img src="https://icons.iconarchive.com/icons/sicons/basic-round-social/512/amazon-icon.png" class="w-6 h-6"
            alt="Amazon Logo">
          <span class="ml-2 text-sm leading-none" *ngIf="isSidebarExpanded">Amazon Reports</span>
        </li>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center hover:cursor-not-allowed">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
          </svg>
          <span class="ml-2 text-sm leading-none" *ngIf="isSidebarExpanded">Consolidated Data</span>
        </li>

        <div class="w-full border-t border-gray-500"></div>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" routerLink="/documentation">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
          </svg>
          <span class="ml-2 text-sm leading-none" *ngIf="isSidebarExpanded">Documentation</span>
        </li>

        <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" routerLink="/terms-condition">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z" />
          </svg>
          <span class="ml-2 text-sm leading-none" *ngIf="isSidebarExpanded">Terms & Condition</span>
        </li>

        <!-- <li class="py-2 cursor-pointer px-4 hover:bg-gray-700 rounded flex items-center" routerLink="/settings">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495" />
          </svg>          
          <span class="ml-2 text-sm leading-none" *ngIf="isSidebarExpanded">Settings</span>
        </li> -->
      </ul>
      <div>
      </div>
      <div class="w-full">
        <div class="flex justify-end w-full mb-4 cursor-pointer rounded-lg" (click)="toggleSidebar()">
          <div class="w-8 h-8 ">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
              stroke="currentColor" class="w-full h-full text-gray-300">
              <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"
                *ngIf="!isSidebarExpanded" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"
                *ngIf="isSidebarExpanded" />
            </svg>
          </div>
        </div>

        <div (click)="logoutExec()"
          class="justify-center flex items-center p-2 hover:bg-gray-700 rounded-lg cursor-pointer transition-all duration-300 ease-in-out">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="w-6 h-6 text-gray-300">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9" />
          </svg>
          <span class="ml-2 text-sm text-gray-400 group-hover:text-white" *ngIf="isSidebarExpanded">Logout</span>
        </div>
      </div>

    </div>
  </div>

  <div [ngClass]="{ 'ml-20': !isSidebarExpanded, 'ml-52': isSidebarExpanded }"
    class="transition-all duration-300 ease-in-out main-content ml-20 flex-1 flex flex-col bg-[#2e3136]"
    [ngClass]="{ dark: isDarkMode }">

    <div [ngClass]="{ 'ml-20': !isSidebarExpanded, 'ml-52': isSidebarExpanded }"
      class="transition-all duration-300 ease-in-out header fixed ml-20 top-0 left-0 right-0 flex flex-col items-center justify-between z-10 backdrop-blur-md">
      <div
        class="flex flex-row border-b-[1px] border-[#413f3f] justify-between w-full items-center space-x-3 bg-cover bg-center bg-no-repeat bg-image relative p-2 h-14">
        <div class="flex flex-row items-center relative z-10">
          <div class="text-xl font-bold ml-2 text-white mr-5 g-thin">{{ headerTitle }}</div>
        </div>

        <div class="flex flex-row items-center relative z-10">
          <div class="mr-2">
            <p class="text-sm mr-2 text-white">{{ user.firstname }} {{ user.lastname }}</p>
            <p class="text-xs mr-2 text-white">{{ user.department }}</p>
          </div>
          <div class="mr-3">
            <div class="rounded-full border-2 p-0.5 border-[#60cef0]">
              <img src="{{ profileImg }}" class="rounded-full w-[28px] h-[28px]" width="28px" height="28px"
                alt="User Image">
            </div>

          </div>
        </div>
      </div>
    </div>
    <main class="flex-grow p-4 bg-[#2e3136] mt-14">
      <router-outlet></router-outlet>

        <!-- <div class="fixed bottom-4 right-4 z-50 p-3 bg-transparent text-white animate-pulse">
        <div id="chat-container" class="p-3 w-36 flex justify-center items-center flex-col cursor-pointer"
          (click)="toggleChatbox()">
          <img *ngIf="!isChatOpen" [src]="'https://www.svgrepo.com/show/5126/chat.svg'" width="60" alt="chat icon">
          <p *ngIf="!isChatOpen" class="bg-slate-500 p-2 mt-2 text-center text-xs">Yara is Online</p>
        </div>
      </div>

      <div *ngIf="isChatOpen" class="fixed bottom-20 right-4 bg-white p-4 w-80 h-96 rounded-lg shadow-lg flex flex-col">
        <div class="flex justify-between items-center border-b pb-2 mb-3">
          <div class="flex items-center">
            <div>
              <p class="text-lg font-semibold">Yara</p>
            </div>
            <span class="w-2.5 h-2.5 rounded-full bg-green-500 ml-2"></span>
          </div>
          <div class="flex flex-row justify-center items-center gap-2">
            <svg class="hover:bg-blue-200" (click)="deleteConversation()" xmlns="http://www.w3.org/2000/svg" fill="none"
              viewBox="0 0 24 24" stroke-width="1.5" stroke="red" class="size-5">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0">
              </path>
            </svg>
            <button (click)="toggleChatbox()" class="text-lg text-red-500">X</button>
          </div>
        </div>

        <div #scrollContainer class="flex-grow overflow-auto p-2 bg-gray-100 mt-2 rounded-lg">
          <div class="w-full flex justify-center text-center mb-2">
            <p class="text-xs">Yara's Interactive AI Chatbot v1.0.2</p>
          </div>
          <div *ngFor="let message of messages" class="mb-2"
            [ngClass]="{'flex': message.role === 'user', 'flex-row-reverse': message.role === 'user'}">
            <div *ngIf="message.role === 'assistant'" class="flex items-start">
              <img class="w-8 h-8 rounded-full mr-2" src="https://www.svgrepo.com/show/510167/robot.svg"
                alt="Yara-avatar">
              <div class="bg-gray-300 text-gray-700 p-3 rounded-lg max-w-xs">
                {{ message.content }}
              </div>
            </div>

            <div *ngIf="message.role === 'user'" class="flex justify-end">
              <div class="bg-blue-500 text-white p-3 rounded-lg max-w-xs">
                {{ message.content }}
              </div>
            </div>
          </div>
        </div>

        <div class="flex items-center mt-4 border-t pt-2">
          <input type="text" [(ngModel)]="inputMessage" class="w-full p-2 border border-gray-300 rounded-lg text-sm"
            placeholder="Type your message...">
          <button (click)="submitMessage()" class="ml-2 bg-blue-500 text-white p-2 rounded-lg text-sm">Send</button>
        </div>
      </div> -->

    </main>


    <div class="footer p-1 text-center">
      <div class="text-[#f1f1f1] text-sm mb-2">
        © Yara by Channel Precision Devs 2024. All rights reserved
      </div>
    </div>
  </div>

</div>